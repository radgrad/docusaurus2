(window.webpackJsonp=window.webpackJsonp||[]).push([[129],{184:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return i})),n.d(t,"metadata",(function(){return s})),n.d(t,"rightToc",(function(){return c})),n.d(t,"default",(function(){return d}));var a=n(2),r=n(6),o=(n(0),n(320)),i={title:"Testing scripts"},s={unversionedId:"developers/testing/reference/testing-scripts",id:"developers/testing/reference/testing-scripts",isDocsHomePage:!1,title:"Testing scripts",description:"This page documents all the NPM scripts associated with testing.",source:"@site/docs/developers/testing/reference/testing-scripts.md",slug:"/developers/testing/reference/testing-scripts",permalink:"/docs/developers/testing/reference/testing-scripts",version:"current",lastUpdatedBy:"Philip Johnson",lastUpdatedAt:1621458933,sidebar:"mainSidebar",previous:{title:"How to perform testing with different roles",permalink:"/docs/developers/testing/howto/perform-testing-with-different-roles"},next:{title:"Oveview of the InternAloha integration project",permalink:"/docs/developers/internaloha/overview"}},c=[{value:"meteor npm run lint",id:"meteor-npm-run-lint",children:[]},{value:"meteor npm run unimported",id:"meteor-npm-run-unimported",children:[]},{value:"meteor npm run test-unit",id:"meteor-npm-run-test-unit",children:[]},{value:"meteor npm test-integration",id:"meteor-npm-test-integration",children:[]},{value:"meteor npm run test-acceptance-development",id:"meteor-npm-run-test-acceptance-development",children:[]},{value:"meteor npm run test-acceptance",id:"meteor-npm-run-test-acceptance",children:[]},{value:"meteor npm run test-all",id:"meteor-npm-run-test-all",children:[]}],p={rightToc:c};function d(e){var t=e.components,n=Object(r.a)(e,["components"]);return Object(o.b)("wrapper",Object(a.a)({},p,n,{components:t,mdxType:"MDXLayout"}),Object(o.b)("p",null,"This page documents all the NPM scripts associated with testing."),Object(o.b)("div",{className:"admonition admonition-caution alert alert--warning"},Object(o.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-heading"}),Object(o.b)("h5",{parentName:"div"},Object(o.b)("span",Object(a.a)({parentName:"h5"},{className:"admonition-icon"}),Object(o.b)("svg",Object(a.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"}),Object(o.b)("path",Object(a.a)({parentName:"svg"},{fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"})))),"caution")),Object(o.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-content"}),Object(o.b)("p",{parentName:"div"},"RadGrad testing might not be fully supported on the Windows platform. In particular, the test-all script might fail on Windows, either because the unimported script fails or because the test-acceptance script triggers a timeout."),Object(o.b)("p",{parentName:"div"},"If you are experiencing either of these issues on Windows, then one workaround is to run the testing commands individually:"),Object(o.b)("ul",{parentName:"div"},Object(o.b)("li",{parentName:"ul"},"meteor npm run lint"),Object(o.b)("li",{parentName:"ul"},"meteor npm run test-unit"),Object(o.b)("li",{parentName:"ul"},"meteor npm run test-integration"),Object(o.b)("li",{parentName:"ul"},"meteor npm run test-acceptance-development")),Object(o.b)("p",{parentName:"div"},"If all of those pass, then you can ask a fellow developer on a Unix platform to run the unimported command on your branch (if unimported does not succeed for you). Or, if you're feeling lucky, just merge your changes into master and monitor the CI build on GitHub."))),Object(o.b)("h2",{id:"meteor-npm-run-lint"},"meteor npm run lint"),Object(o.b)("p",null,"This command checks the code according to our RadGrad ESLint guidelines."),Object(o.b)("p",null,"Example invocation and output:"),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-shell"}),"$ meteor npm run lint\n\n> radgrad2@ lint /Users/philipjohnson/github/radgrad/radgrad2/app\n> eslint --fix --quiet --ext .tsx --ext .ts ./imports\n\n$\n")),Object(o.b)("h2",{id:"meteor-npm-run-unimported"},"meteor npm run unimported"),Object(o.b)("p",null,"This command checks to see if there is any unused components:"),Object(o.b)("p",null,"Example invocation and output:"),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{}),"$ meteor npm run unimported\n\n> radgrad2@2.0.20 unimported /Users/philipjohnson/github/radgrad/radgrad2/app\n> npx unimported\n\nnpx: installed 182 in 14.796s\n\u2713 There don't seem to be any unimported files.\n")),Object(o.b)("h2",{id:"meteor-npm-run-test-unit"},"meteor npm run test-unit"),Object(o.b)("p",null,"This command runs all of the unit (server-only) tests, unless MOCHA_GREP is set, in which case only the subset of unit tests matching the string in MOCHA_GREP are run."),Object(o.b)("p",null,"Example (abbreviated) output:"),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-shell"})," $ meteor npm run test-unit\n\n> radgrad2@ test-unit /Users/philipjohnson/github/radgrad/radgrad2/app\n> cross-env METEOR_NO_RELEASE_CHECK=1 TEST_BROWSER_DRIVER=puppeteer meteor test --once --driver-package meteortesting:mocha --port 3300\n\n[[[[[ Tests ]]]]]\n\n=> Started proxy.\n=> Started MongoDB.\nI20201002-14:54:53.821(-10)?\nI20201002-14:54:53.880(-10)? --------------------------------\nI20201002-14:54:53.880(-10)? ----- RUNNING SERVER TESTS -----\nI20201002-14:54:53.881(-10)? --------------------------------\nI20201002-14:54:53.881(-10)?\nI20201002-14:54:53.881(-10)?\nI20201002-14:54:53.881(-10)?\nI20201002-14:54:53.881(-10)?   AcademicTermCollection\n=> Started your app.\n\n=> App running at: http://localhost:3300/\nI20201002-14:54:55.385(-10)?     \u2713 Can define and removeIt (1533ms)\nI20201002-14:54:55.391(-10)?     \u2713 Cannot define duplicates\nI20201002-14:54:55.491(-10)?     \u2713 Can update (100ms)\nI20201002-14:54:55.505(-10)?     \u2713 Can dumpOne, removeIt, and restoreOne\nI20201002-14:54:55.507(-10)?     \u2713 Can checkIntegrity no errors\nI20201002-14:54:55.512(-10)?     \u2713 Can assertAcademicTerm\nI20201002-14:54:55.521(-10)?     \u2713 Can findIdBySlug\nI20201002-14:54:55.533(-10)?     \u2713 Can toString\nI20201002-14:54:55.570(-10)?     \u2713 Can get the right termNumber\nI20201002-14:54:55.588(-10)?     \u2713 Can getID\nI20201002-14:54:55.597(-10)?     \u2713 Can getShortName\nI20201002-14:54:55.608(-10)?\nI20201002-14:54:55.608(-10)?   AcademicTermUtilities\nI20201002-14:54:55.689(-10)?     \u2713 Can get nextAcademicTerm\nI20201002-14:54:55.691(-10)?     \u2713 Can get upComingTerms\nI20201002-14:54:55.701(-10)?\nI20201002-14:54:55.701(-10)?   IceSnapshotCollection\nI20201002-14:54:56.136(-10)?     \u2713 Can define and remove (345ms)\nI20201002-14:54:56.138(-10)?     \u2713 Can checkIntegrity no errors\nI20201002-14:54:56.148(-10)?\n  :\n  :\n  :\nI20201002-14:57:44.100(-10)?   237 passing (3m)\nI20201002-14:57:44.100(-10)?   1 pending\nI20201002-14:57:44.100(-10)?\nI20201002-14:57:44.100(-10)?\nI20201002-14:57:44.100(-10)? --------------------------------\nI20201002-14:57:44.100(-10)? ----- RUNNING CLIENT TESTS -----\nI20201002-14:57:44.100(-10)? --------------------------------\nI20201002-14:57:46.837(-10)? HeadlessChrome/86.0.4240.0\nW20201002-14:57:47.605(-10)? (STDERR)\nW20201002-14:57:48.010(-10)? (STDERR) waitFor is deprecated and will be removed in a future release. See https://github.com/puppeteer/puppeteer/issues/6214 for details and how to migrate your code.\nI20201002-14:57:48.013(-10)?   0 passing (0ms)\nI20201002-14:57:48.079(-10)? All tests finished!\nI20201002-14:57:48.079(-10)?\nI20201002-14:57:48.080(-10)? --------------------------------\nI20201002-14:57:48.080(-10)? SERVER FAILURES: 0\nI20201002-14:57:48.080(-10)? CLIENT FAILURES: 0\nI20201002-14:57:48.080(-10)? --------------------------------\n~/g/r/r/app (master|\u2714) $\n")),Object(o.b)("p",null,"For more details, see ",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"../howto/write-unit-tests"}),"How to write unit tests"),"."),Object(o.b)("h2",{id:"meteor-npm-test-integration"},"meteor npm test-integration"),Object(o.b)("p",null,"Runs all of the integration tests (i.e. tests of Meteor Methods), unless MOCHA_GREP is set, in which case only the subset of unit tests matching the string in MOCHA_GREP are run."),Object(o.b)("p",null,"Example invocation and (abbreviated) output:"),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-shell"}),'$ meteor npm run test-integration\n\n> radgrad2@ test-integration /Users/philipjohnson/github/radgrad/radgrad2/app\n> cross-env TEST_BROWSER_DRIVER=puppeteer meteor test --no-release-check --exclude-archs web.browser.legacy,web.cordova --full-app --once --driver-package meteortesting:mocha --port 3300\n\n[[[[[ Tests ]]]]]\n\n=> Started proxy.\n=> Started MongoDB.\nI20201028-15:13:13.490(-10)?\nI20201028-15:13:13.528(-10)? --------------------------------\nI20201028-15:13:13.538(-10)? --- RUNNING APP SERVER TESTS ---\nI20201028-15:13:13.539(-10)? --------------------------------\nI20201028-15:13:13.539(-10)?\nI20201028-15:13:13.539(-10)?\nI20201028-15:13:13.539(-10)?\nI20201028-15:13:13.539(-10)?   0 passing (0ms)\nI20201028-15:13:13.539(-10)?\nI20201028-15:13:13.539(-10)?\nI20201028-15:13:13.540(-10)? --------------------------------\nI20201028-15:13:13.540(-10)? --- RUNNING APP CLIENT TESTS ---\nI20201028-15:13:13.540(-10)? --------------------------------\nI20201028-15:13:13.827(-10)? Monti APM: completed instrumenting the app\nI20201028-15:13:13.829(-10)? Test mode. Database initialization disabled, current database cleared, rate limiting disabled.\nI20201028-15:13:14.018(-10)? Defining admin radgrad@hawaii.edu with password foo\n=> Started your app.\n\n=> App running at: http://localhost:3300/\nI20201028-15:13:14.063(-10)? HeadlessChrome/86.0.4240.0\nW20201028-15:13:16.181(-10)? (STDERR)\nI20201028-15:13:16.634(-10)? Download the React DevTools for a better development experience: https://fb.me/react-devtools\nW20201028-15:13:18.383(-10)? (STDERR) Warning: "Responsive" component from Semantic UI React is deprecated and will be removed in the next major release. Please follow our upgrade guide: https://github.com/Semantic-Org/Semantic-UI-React/pull/4008\nI20201028-15:13:18.443(-10)?\nI20201028-15:13:18.444(-10)?   UserInteractionCollection Meteor Methods\nI20201028-15:13:18.509(-10)?     Loaded database/modular/minimal.fixture.json: Sample definitions for basic entities.\nW20201028-15:13:18.968(-10)? (STDERR) waitFor is deprecated and will be removed in a future release. See https://github.com/puppeteer/puppeteer/issues/6214 for details and how to migrate your code.\nI20201028-15:13:19.080(-10)?     Loaded database/modular/abi.student.fixture.json: Defines student Abi Kealoha. Requires minimal.fixture.\nI20201028-15:13:19.749(-10)?     \u2713 Define Method (515ms)\nI20201028-15:13:19.761(-10)?     \u2713 Remove Method\nI20201028-15:13:19.763(-10)?   CareerGoalCollection Meteor Methods\nI20201028-15:13:19.791(-10)?     Loaded database/modular/minimal.fixture.json: Sample definitions for basic entities.\nI20201028-15:13:20.042(-10)?     Loaded database/modular/abi.student.fixture.json: Defines student Abi Kealoha. Requires minimal.fixture.\nI20201028-15:13:20.542(-10)?     \u2713 Define Method (450ms)\nI20201028-15:13:20.569(-10)?     \u2713 Update Method\nI20201028-15:13:20.599(-10)?     \u2713 Remove Method\nI20201028-15:13:20.600(-10)?   CourseCollection Meteor Methods\nI20201028-15:13:20.632(-10)?     Loaded database/modular/minimal.fixture.json: Sample definitions for basic entities.\nI20201028-15:13:20.894(-10)?     Loaded database/modular/abi.student.fixture.json: Defines student Abi Kealoha. Requires minimal.fixture.\nI20201028-15:13:21.414(-10)?     \u2713 Define Method (468ms)\nI20201028-15:13:21.451(-10)?     \u2713 Update Method\nI20201028-15:13:21.806(-10)?     \u2713 getFutureEnrollment Methods (353ms)\nI20201028-15:13:21.842(-10)?     \u2713 Remove Method\n  :\n  :\n  :\nI20201028-15:13:47.632(-10)?   61 passing (29s)\nI20201028-15:13:47.740(-10)? All tests finished!\nI20201028-15:13:47.741(-10)?\nI20201028-15:13:47.742(-10)? --------------------------------\nI20201028-15:13:47.742(-10)? APP SERVER FAILURES: 0\nI20201028-15:13:47.742(-10)? APP CLIENT FAILURES: 0\nI20201028-15:13:47.742(-10)? --------------------------------\n~/g/r/r/app (master|\u271a2) $\n\n')),Object(o.b)("p",null,"For more details, see ",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"../howto/write-integration-tests"}),"How to write integration tests"),"."),Object(o.b)("h2",{id:"meteor-npm-run-test-acceptance-development"},"meteor npm run test-acceptance-development"),Object(o.b)("p",null,"To run the acceptance tests in development mode, first bring up a development version of RadGrad by invoking ",Object(o.b)("inlineCode",{parentName:"p"},"meteor npm run start"),"."),Object(o.b)("p",null,"Then, in a separate command shell, run the acceptance tests as follows:"),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-shell"}),"$ meteor npm run test-acceptance-development\n\n> radgrad2@ test-acceptance-development /Users/philipjohnson/github/radgrad/radgrad2/app\n> testcafe chrome tests/*.testcafe.js\n\n Running tests in:\n - Chrome 86.0.4240.111 / macOS 10.14.6\n\n RadGrad localhost test with default db\n \u2713 Test that landing page shows up\n\n\n 1 passed (13s)\n$\n")),Object(o.b)("p",null,"Running the acceptance tests in development mode pops up a Chrome browser window so you can see the progress of the tests. This makes it much easier to debug your test code."),Object(o.b)("p",null,"For more details, see ",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"../howto/write-acceptance-tests"}),"How to write acceptance tests"),"."),Object(o.b)("h2",{id:"meteor-npm-run-test-acceptance"},"meteor npm run test-acceptance"),Object(o.b)("p",null,'This command runs the acceptance tests in "batch" or "continuous integration" mode.  You do not need to (and indeed cannot) start up an instance of RadGrad. No Chrome window will pop up.'),Object(o.b)("p",null,"Here is a sample invocation:"),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-shell"}),'$ meteor npm run test-acceptance\n\n> radgrad2@ test-acceptance /Users/philipjohnson/github/radgrad/radgrad2/app\n> testcafe chrome:headless tests/*.testcafe.js -q --app "meteor npm run start"\n\n Running tests in:\n - Chrome 86.0.4240.111 / macOS 10.14.6\n\n RadGrad localhost test with default db\n \u2713 Test that landing page shows up (unstable)\n\n\n 1 passed (1m 11s)\n~/g/r/r/app (master|\u271a2) $\n')),Object(o.b)("h2",{id:"meteor-npm-run-test-all"},"meteor npm run test-all"),Object(o.b)("p",null,"This command sequentially invokes lint, then test-unit, then test-integration, and finally test-acceptance."),Object(o.b)("p",null,"As its name implies, it does all the testing."),Object(o.b)("div",{className:"admonition admonition-caution alert alert--warning"},Object(o.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-heading"}),Object(o.b)("h5",{parentName:"div"},Object(o.b)("span",Object(a.a)({parentName:"h5"},{className:"admonition-icon"}),Object(o.b)("svg",Object(a.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"}),Object(o.b)("path",Object(a.a)({parentName:"svg"},{fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"})))),"caution")),Object(o.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-content"}),Object(o.b)("p",{parentName:"div"},"This commmand does not work on Windows, since it invokes npx unimported."))))}d.isMDXComponent=!0},320:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return b}));var a=n(0),r=n.n(a);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var p=r.a.createContext({}),d=function(e){var t=r.a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},l=function(e){var t=d(e.components);return r.a.createElement(p.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},u=r.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,i=e.parentName,p=c(e,["components","mdxType","originalType","parentName"]),l=d(n),u=a,b=l["".concat(i,".").concat(u)]||l[u]||m[u]||o;return n?r.a.createElement(b,s(s({ref:t},p),{},{components:n})):r.a.createElement(b,s({ref:t},p))}));function b(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=u;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:a,i[1]=s;for(var p=2;p<o;p++)i[p]=n[p];return r.a.createElement.apply(null,i)}return r.a.createElement.apply(null,n)}u.displayName="MDXCreateElement"}}]);