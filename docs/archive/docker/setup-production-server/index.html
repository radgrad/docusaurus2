<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.66">
<link rel="search" type="application/opensearchdescription+xml" title="RadGrad" href="/opensearch.xml"><title data-react-helmet="true">Setup a production server using Docker | RadGrad</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Setup a production server using Docker | RadGrad"><meta data-react-helmet="true" name="description" content="We are moving to deployment based on Meteor Up."><meta data-react-helmet="true" property="og:description" content="We are moving to deployment based on Meteor Up."><meta data-react-helmet="true" property="og:url" content="https://radgrad.netlify.com/docs/archive/docker/setup-production-server"><link data-react-helmet="true" rel="shortcut icon" href="/img/radgrad.ico"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link data-react-helmet="true" rel="canonical" href="https://radgrad.netlify.com/docs/archive/docker/setup-production-server"><link rel="stylesheet" href="/styles.645e3c02.css">
<link rel="preload" href="/styles.da1d4261.js" as="script">
<link rel="preload" href="/runtime~main.e66a390a.js" as="script">
<link rel="preload" href="/main.fbf409a7.js" as="script">
<link rel="preload" href="/2.2b91e6c9.js" as="script">
<link rel="preload" href="/3.39e53254.js" as="script">
<link rel="preload" href="/175.4b48d1fb.js" as="script">
<link rel="preload" href="/178.722368df.js" as="script">
<link rel="preload" href="/935f2afb.8657171f.js" as="script">
<link rel="preload" href="/17896441.ed501a95.js" as="script">
<link rel="preload" href="/4050a050.bfc8e83e.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/radgrad_logo.png" alt="RadGrad"><strong class="navbar__title">RadGrad</strong></a></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/overview/motivation">Documentation</a><a class="navbar__item navbar__link" href="/blog">News</a><a class="navbar__item navbar__link" href="/docs/about/opportunities">Join Us</a><a href="https://github.com/radgrad" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2aTZ"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_BsTx">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span><span class="DocSearch-Button-Key">âŒ˜</span><span class="DocSearch-Button-Key">K</span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/radgrad_logo.png" alt="RadGrad"><strong class="navbar__title">RadGrad</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/overview/motivation">Documentation</a></li><li class="menu__list-item"><a class="menu__link" href="/blog">News</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/about/opportunities">Join Us</a></li><li class="menu__list-item"><a href="https://github.com/radgrad" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><div class="docSidebarContainer_3_JD" role="complementary"><div class="sidebar_2urC"><div class="menu menu--responsive menu_5FrY"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Dm3K" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Overview</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/overview/motivation">Motivation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/overview/goals">Goals</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/overview/basic-constructs">Basic Constructs</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">User Guide</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/users/overview">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/users/tutorials/why-radgrad">Why RadGrad?</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/users/tutorials/interests">Interests</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/users/tutorials/career-goals">Career goals</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/users/tutorials/opportunities">Opportunities</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/users/tutorials/ice-and-levels">ICE and Levels</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/users/tutorials/verification-requests">Verification requests</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/users/tutorials/degree-plans">Degree plans</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/users/tutorials/reviews">Reviews</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/users/tutorials/getting-started">Getting started</a></li><li class="menu__list-item"><a href="http://go.hawaii.edu/JuG" target="_blank" rel="noreferrer noopener" class="menu__link" tabindex="-1">1 Page Cheat Sheet (PDF)</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Developer Guide</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developers/overview">Overview</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Getting started</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developers/getting-started/overview">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developers/getting-started/tech-stack">Tech Stack</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">How to...</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developers/getting-started/howto/install-radgrad">Install RadGrad</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developers/getting-started/howto/run-scripts">Run Scripts</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developers/getting-started/howto/branch-and-merge">Branch and merge in RadGrad</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Design</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developers/design/overview">Overview</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">app/</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developers/design/app/overview">Overview</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">imports/</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developers/design/app/imports/overview">Overview</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">api/</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developers/design/app/imports/api/overview">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developers/design/app/imports/api/data-model">Data Model</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developers/design/app/imports/api/class-hierarchy">Class Hierarchy</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developers/design/app/imports/api/entity-relationship-model">Entity-Relationship Model</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developers/design/app/imports/api/pub-sub">Publications and Subscriptions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developers/design/app/imports/api/data-integrity">Data integrity</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developers/design/app/imports/api/dump-restore">Backups using dump-restore</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developers/design/app/imports/api/manage-users">Manage users</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">redux/</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developers/design/app/imports/redux/overview">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developers/design/app/imports/redux/manage-ui-state">Manage UI state</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">ui/</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developers/design/app/imports/ui/overview">Overview</a></li></ul></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">config/</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developers/design/config/overview">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developers/design/config/settings">Settings files</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">scripts/</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developers/design/scripts/overview">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developers/design/scripts/reference">Reference Guide</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">How to...</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developers/design/scripts/howto/update-student-star-data">Update STAR data</a></li></ul></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Reviews</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developers/reviews/overview">Overview</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">How to...</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developers/reviews/howto/conduct-a-review">Conduct a Review</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Checklists</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developers/checklists/overview">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developers/checklists/architecture-checklist">Architecture</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developers/checklists/design-checklist">Design</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developers/checklists/js-ts-checklist">JS, TS, ESLint</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developers/checklists/react-checklist">React</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Testing</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developers/testing/overview">Overview</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Concepts</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developers/testing/concepts/database-fixtures">Database Fixtures</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developers/testing/concepts/continuous-integration">Continuous Integration</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">How to...</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developers/testing/howto/write-unit-tests">Write unit tests</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developers/testing/howto/write-integration-tests">Write integration tests</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developers/testing/howto/write-acceptance-tests">Write acceptance tests</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developers/testing/howto/perform-testing-with-different-roles">Perform testing with different roles</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Reference</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developers/testing/reference/testing-scripts">Testing scripts</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Deployment</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developers/deployment/overview">Overview</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">How to...</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developers/deployment/howto/setup-production-server-mup">Setup production server</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developers/deployment/howto/build-a-release-mup">Build a release</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developers/deployment/howto/reset-db">Reset the database</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Reference</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developers/deployment/reference/mup-commands">mup commands</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developers/deployment/reference/settings-file">settings.production.json</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Documentation</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Concepts</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developers/documentation/concepts/radgrad-domain">The radgrad.org domain</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">How to...</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developers/documentation/howto/manage-this-site">Manage this site</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developers/documentation/howto/use-mdx">Use MDX</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developers/documentation/howto/write-markdown">Write markdown</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Reference</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developers/reference/overview">Overview</a></li><li class="menu__list-item"><a href="https://radgrad.github.io/radgrad2/" target="_blank" rel="noreferrer noopener" class="menu__link" tabindex="-1">JSDocs</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">About us</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/about/team">The Team</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/about/publications">Pubs, Grants, Talks</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/about/opportunities">Opportunities</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Archive</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">Deployment (Docker)</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/archive/docker/setup-production-server">Setup production server (Docker)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/archive/docker/build-a-release">Build a release (Docker)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/archive/docker/deploy-a-release">Deploy a release (Docker)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/archive/docker/docker-management">Docker management</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/archive/docker/setup-ssh">Setup SSH (Docker)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/archive/docker/docker-commands">Commands (Docker)</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Internbit</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/archive/internbit/goals">Goals</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/archive/internbit/resources">Resources</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/archive/internbit/scraping">Scraping</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/archive/internbit/needs-assessment">InternBit Needs Assessment</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/archive/internbit/canonical-schema">Canonical Schema</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/archive/internbit/evaluation">Evaluation</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">CSExplore</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/archive/csexplore/goals">Goals</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/archive/csexplore/resources">Resources</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/archive/csexplore/organizing-principle">Organizing Principles</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/archive/csexplore/evaluation">Evaluation</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Mockups</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/archive/csexplore/annotated-mockup/save-hawaii-with-computer-science">Save Hawaii with CS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/archive/csexplore/annotated-mockup/csexplore-ocean-earth">CSExplore Ocean and Earth</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/archive/csexplore/annotated-mockup/find-the-path">Find the Path to CS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/archive/csexplore/annotated-mockup/CS-Explore-Chat">CS Explore Chat</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/archive/csexplore/annotated-mockup/build-your-community">Build Your Community</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">DevOps</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/archive/devops/goals">Goals</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/archive/devops/resources">Resources</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/archive/devops/evaluation">Evaluation</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Deployment</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/archive/devops/deployment/heroku">Heroku</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/archive/devops/deployment/nodechef">NodeChef</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/archive/devops/deployment/digital-ocean">Digital Ocean</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/archive/devops/deployment/google-cloud">Google Cloud</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/archive/devops/deployment/microsoft-azure">Microsoft Azure</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/archive/devops/deployment/uh-its">UH ITS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/archive/devops/deployment/aws">AWS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/archive/devops/deployment/mongo-url">Obtaining a MONGO_URL</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/archive/devops/deployment/waves-hosting">Waves Hosting</a></li></ul></li></ul></li></ul></li></ul></div></div></div><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_1EkI"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><header><h1 class="docTitle_1Lrw">Setup a production server using Docker</h1></header><div class="markdown"><div class="admonition admonition-warning alert alert--danger"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>warning</h5></div><div class="admonition-content"><p>We are moving to deployment based on Meteor Up.</p><p>The instructions on this page are deprecated</p></div></div><p>This page documents the process of setting up a production server for RadGrad using a Docker-based build mechanism.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="setup-location"></a>Setup location<a aria-hidden="true" tabindex="-1" class="hash-link" href="#setup-location" title="Direct link to heading">#</a></h2><p>To start, you will need to create the ability for multiple developers to manage a single RadGrad installation on this server.  You can do this either via multiple logins, each with sudo access, and a shared directory, or else via a single account whose password is shared amongst developers involved in production.</p><p>In this page, we will assume you (or a sysadmin) has created an account called &quot;radgrad&quot; that is used by all developers to manage this installation.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="open-ports"></a>Open ports<a aria-hidden="true" tabindex="-1" class="hash-link" href="#open-ports" title="Direct link to heading">#</a></h2><p>Several ports on the server will need to be open:</p><table><thead><tr><th>Port</th><th>Service</th></tr></thead><tbody><tr><td>22</td><td>ssh</td></tr><tr><td>443</td><td>https</td></tr><tr><td>80</td><td>web</td></tr><tr><td>8888</td><td>http</td></tr></tbody></table><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="install-docker"></a>Install Docker<a aria-hidden="true" tabindex="-1" class="hash-link" href="#install-docker" title="Direct link to heading">#</a></h2><p>First, install Docker and Docker Compose.</p><p>Please consult the <a href="https://docs.docker.com/install/" target="_blank" rel="noopener noreferrer">Docker installation documentation</a> and the <a href="https://docs.docker.com/compose/install/" target="_blank" rel="noopener noreferrer">Docker Compose installation documentation</a> for instructions.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>TO install Docker on Ubuntu 18, I followed <a href="https://www.digitalocean.com/community/tutorials/how-to-install-and-use-docker-on-ubuntu-18-04" target="_blank" rel="noopener noreferrer">these instructions</a>.</p><p>There are useful instructions at the end documenting how to setup the user to not need sudo for docker.</p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="clone-radgrad-docker"></a>Clone radgrad-docker<a aria-hidden="true" tabindex="-1" class="hash-link" href="#clone-radgrad-docker" title="Direct link to heading">#</a></h2><p>Next, clone the <a href="https://github.com/radgrad/radgrad-docker" target="_blank" rel="noopener noreferrer">radgrad-docker repository</a> with:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-shell codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ </span><span class="token function" style="color:rgb(130, 170, 255)">git</span><span class="token plain"> clone https://github.com/radgrad/radgrad-docker.git</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="setup-config"></a>Setup config/<a aria-hidden="true" tabindex="-1" class="hash-link" href="#setup-config" title="Direct link to heading">#</a></h2><p>Your local radgrad-docker directory contains a subdirectory called &quot;sample-config&quot; containing various files and directories needed for the installation.</p><p>A production server will access a customized version of these template files from a directory you must create called config/.  Here&#x27;s how to do it:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-shell codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">radgrad-docker $ </span><span class="token function" style="color:rgb(130, 170, 255)">mkdir</span><span class="token plain"> config</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">radgrad-docker $ </span><span class="token function" style="color:rgb(130, 170, 255)">cp</span><span class="token plain"> -R sample-config/* config</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="setup-settings"></a>Setup settings<a aria-hidden="true" tabindex="-1" class="hash-link" href="#setup-settings" title="Direct link to heading">#</a></h2><p>In order for RadGrad to deploy successfully, it expects to find a file called &quot;settings.production.json&quot; in the config/ directory. To create this file from a template, run:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-shell codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">radgrad-docker $ </span><span class="token function" style="color:rgb(130, 170, 255)">mv</span><span class="token plain"> config/sample.settings.production.json config/settings.production.json</span></div></div></div></div></div><p>See the <a href="/docs/archive/reference/settings-file">reference guide on settings.production.json</a> for details.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="setup-https"></a>Setup https<a aria-hidden="true" tabindex="-1" class="hash-link" href="#setup-https" title="Direct link to heading">#</a></h2><p>RadGrad needs to run on HTTPS. Here is a procedure to request SSL certificates for your domain (from Let&#x27;s Encrypt) so that it can run over HTTPS.</p><p>In addition to Meteor and MongoDB services, the RadGrad Docker services include nginx and certbot. The Nginx web server on port 80 is configured to forward HTTP traffic to an HTTPS web server on port 443, which subsequently reverse proxies traffic to the RadGrad application on port 8888.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="modify-nginxenv"></a>Modify nginx.env<a aria-hidden="true" tabindex="-1" class="hash-link" href="#modify-nginxenv" title="Direct link to heading">#</a></h3><p>To begin, you will need to modify some of the configuration variables in the radgrad-docker/config/nginx/nginx.env file on the production server. This configuration file should have already been copied over from the sample-config/ directory earlier during the setup process.</p><p>This file contains three variables that you will need to modify. It defaults to this:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-shell codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token builtin class-name" style="color:rgb(255, 203, 107)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">NGINX_SERVER_NAME</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">example.org</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">LETSENCRYPT_EMAIL</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">user@example.org</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">LETSENCRYPT_STAGING_MODE</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">1</span></div></div></div></div></div><p>Modify the NGINX_SERVER_NAME variable with the domain name pointing to your host machine.</p><p>Modify the LETSENCRYPT_EMAIL variable with an email address that should be associated with the SSL certificate generated for the given domain name.</p><p>Finally, leave the LETSENCRYPT_STAGING_MODE variable set to <code>1</code> for the time being. This will ensure that you do not hit any certificate request limit while testing your HTTPS configuration.</p><p>Your nginx.env file should now look something like this:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-shell codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token builtin class-name" style="color:rgb(255, 203, 107)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">NGINX_SERVER_NAME</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">radgrad2.ics.hawaii.edu</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">LETSENCRYPT_EMAIL</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">admin@radgrad.org</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">LETSENCRYPT_STAGING_MODE</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">1</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="perform-a-test-run"></a>Perform a test run<a aria-hidden="true" tabindex="-1" class="hash-link" href="#perform-a-test-run" title="Direct link to heading">#</a></h3><p>Before we begin, ensure that all RadGrad services are shut down by changing into the radgrad-docker directory and invoking <code>docker-compose down</code>.</p><p>Then, invoke the init-letsencrypt.sh script and follow the prompts. It should look something like this:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-shell codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">radgrad-docker$ ./init-letsencrypt.sh</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Existing data found </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> radgrad2.ics.hawaii.edu. Continue and replace existing certificate? </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">y/N</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> y</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Deleting existing files </span><span class="token keyword" style="font-style:italic">in</span><span class="token plain"> ./data/certbot. Sudo is used </span><span class="token keyword" style="font-style:italic">in</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">case</span><span class="token plain"> the ./data/certbot files are owned by root, </span><span class="token function" style="color:rgb(130, 170, 255)">which</span><span class="token plain"> can occur </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> Docker Compose has already been previously spun-up prior to running this script.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">### Creating dummy certificate for radgrad2.ics.hawaii.edu ...</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Starting radgrad-docker_nginx_1 </span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">. </span><span class="token keyword" style="font-style:italic">done</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Creating radgrad-docker_certbot_run </span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">. </span><span class="token keyword" style="font-style:italic">done</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Generating a RSA private key</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">.+++++</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">+++++</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">writing new private key to </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;/etc/letsencrypt/live/radgrad2.ics.hawaii.edu/privkey.pem&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-----</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">### Starting nginx ...</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Stopping radgrad-docker_certbot_1 </span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">. </span><span class="token keyword" style="font-style:italic">done</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Stopping radgrad-docker_radgrad_1 </span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">. </span><span class="token keyword" style="font-style:italic">done</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Stopping radgrad-mongo            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">. </span><span class="token keyword" style="font-style:italic">done</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Removing radgrad-docker_certbot_1 </span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">. </span><span class="token keyword" style="font-style:italic">done</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Removing radgrad-docker_nginx_1   </span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">. </span><span class="token keyword" style="font-style:italic">done</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Removing radgrad-docker_radgrad_1 </span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">. </span><span class="token keyword" style="font-style:italic">done</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Removing radgrad-mongo            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">. </span><span class="token keyword" style="font-style:italic">done</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Removing network radgrad-docker_default</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Startup Docker-Compose. Note: Be sure that docker-compose.yml is same directory as this script.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker-compose up -d --remove-orphans</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Creating network </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;radgrad-docker_default&quot;</span><span class="token plain"> with the default driver</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Creating radgrad-mongo </span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">. </span><span class="token keyword" style="font-style:italic">done</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Creating radgrad-docker_radgrad_1 </span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">. </span><span class="token keyword" style="font-style:italic">done</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Creating radgrad-docker_nginx_1   </span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">. </span><span class="token keyword" style="font-style:italic">done</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Creating radgrad-docker_certbot_1 </span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">. </span><span class="token keyword" style="font-style:italic">done</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">### Deleting dummy certificate for radgrad2.ics.hawaii.edu ...</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker-compose run --rm --entrypoint </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;\</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">  rm -Rf /etc/letsencrypt/live/</span><span class="token string variable" style="color:rgb(191, 199, 213)">$domains</span><span class="token string" style="color:rgb(195, 232, 141)"> &amp;&amp; \</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">  rm -Rf /etc/letsencrypt/archive/</span><span class="token string variable" style="color:rgb(191, 199, 213)">$domains</span><span class="token string" style="color:rgb(195, 232, 141)"> &amp;&amp; \</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">  rm -Rf /etc/letsencrypt/renewal/</span><span class="token string variable" style="color:rgb(191, 199, 213)">$domains</span><span class="token string" style="color:rgb(195, 232, 141)">.conf&quot;</span><span class="token plain"> certbot</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Creating radgrad-docker_certbot_run </span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">. </span><span class="token keyword" style="font-style:italic">done</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">### Requesting Let&#x27;s Encrypt certificate for radgrad2.ics.hawaii.edu ...</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Creating radgrad-docker_certbot_run </span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">. </span><span class="token keyword" style="font-style:italic">done</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Saving debug log to /var/log/letsencrypt/letsencrypt.log</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Plugins selected: Authenticator webroot, Installer None</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Would you be willing, once your first certificate is successfully issued, to</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">share your email address with the Electronic Frontier Foundation, a founding</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">partner of the Let</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;s Encrypt project and the non-profit organization that</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">develops Certbot? We&#x27;</span><span class="token plain">d like to send you email about our work encrypting the web,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">EFF news, campaigns, and ways to support digital freedom.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">Y</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">es/</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">N</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">o: n</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Obtaining a new certificate</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Performing the following challenges:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">http-01 challenge </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> radgrad2.ics.hawaii.edu</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Using the webroot path /var/www/certbot </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> all unmatched domains.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Waiting </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> verification</span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Cleaning up challenges</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">IMPORTANT NOTES:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> - Congratulations</span><span class="token operator" style="color:rgb(137, 221, 255)">!</span><span class="token plain"> Your certificate and chain have been saved at:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   /etc/letsencrypt/live/radgrad2.ics.hawaii.edu/fullchain.pem</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   Your key </span><span class="token function" style="color:rgb(130, 170, 255)">file</span><span class="token plain"> has been saved at:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   /etc/letsencrypt/live/radgrad2.ics.hawaii.edu/privkey.pem</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   Your cert will expire on </span><span class="token number" style="color:rgb(247, 140, 108)">2020</span><span class="token plain">-12-27. To obtain a new or tweaked</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   version of this certificate </span><span class="token keyword" style="font-style:italic">in</span><span class="token plain"> the future, simply run certbot</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   again. To non-interactively renew *all* of your certificates, run</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;certbot renew&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> - Your account credentials have been saved </span><span class="token keyword" style="font-style:italic">in</span><span class="token plain"> your Certbot</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   configuration directory at /etc/letsencrypt. You should </span><span class="token function" style="color:rgb(130, 170, 255)">make</span><span class="token plain"> a</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   secure backup of this folder now. This configuration directory will</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   also contain certificates and private keys obtained by Certbot so</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   making regular backups of this folder is ideal.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">### Reloading nginx ...</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token number" style="color:rgb(247, 140, 108)">2020</span><span class="token plain">/09/28 </span><span class="token number" style="color:rgb(247, 140, 108)">20</span><span class="token plain">:46:31 </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">notice</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">10</span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#10: signal process started</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">radgrad-docker$</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="request-real-ssl-certificate"></a>Request real SSL certificate<a aria-hidden="true" tabindex="-1" class="hash-link" href="#request-real-ssl-certificate" title="Direct link to heading">#</a></h3><p>Now that everything looks good, we can now go ahead and request a real SSL certificate!</p><p>First, shut down all RadGrad services by changing into the radgrad-docker directory and invoking:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-shell codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">radgrad-docker $ docker-compose down</span></div></div></div></div></div><p>Then, open the opq-docker/config/nginx/nginx.env file and set the LETSENCRYPT_STAGING_MODE variable to 0. The file should now look something like this:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-shell codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token assign-left variable" style="color:rgb(191, 199, 213)">NGINX_SERVER_NAME</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">radgrad2.ics.hawaii.edu</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">LETSENCRYPT_EMAIL</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">admin@radgrad.org</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">LETSENCRYPT_STAGING_MODE</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">0</span></div></div></div></div></div><p>Finally, invoke the init-letsencrypt.sh script and follow the prompts. The output should be nearly identical to that of the test run that was performed earlier.</p><p>Verify that the certificate was granted by visiting the RadGrad application using https.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="debugging--check-service-status"></a>Debugging:  Check service status<a aria-hidden="true" tabindex="-1" class="hash-link" href="#debugging--check-service-status" title="Direct link to heading">#</a></h3><p>Check to make sure all required services are running:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-shell codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">radgrad-docker$ docker </span><span class="token function" style="color:rgb(130, 170, 255)">ps</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">CONTAINER ID        IMAGE                   COMMAND                  CREATED             STATUS              PORTS                                      NAMES</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">536005ec471f        certbot/certbot         </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/bin/sh -c &#x27;trap exâ€¦&quot;</span><span class="token plain">   </span><span class="token number" style="color:rgb(247, 140, 108)">27</span><span class="token plain"> seconds ago      Up </span><span class="token number" style="color:rgb(247, 140, 108)">25</span><span class="token plain"> seconds       </span><span class="token number" style="color:rgb(247, 140, 108)">80</span><span class="token plain">/tcp, </span><span class="token number" style="color:rgb(247, 140, 108)">443</span><span class="token plain">/tcp                            radgrad-docker_certbot_1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">89376ec0e6a9        nginx:1.15-alpine       </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/bin/sh -c &#x27;while :â€¦&quot;</span><span class="token plain">   </span><span class="token number" style="color:rgb(247, 140, 108)">28</span><span class="token plain"> seconds ago      Up </span><span class="token number" style="color:rgb(247, 140, 108)">26</span><span class="token plain"> seconds       </span><span class="token number" style="color:rgb(247, 140, 108)">0.0</span><span class="token plain">.0.0:80-</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token number" style="color:rgb(247, 140, 108)">80</span><span class="token plain">/tcp, </span><span class="token number" style="color:rgb(247, 140, 108)">0.0</span><span class="token plain">.0.0:443-</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token number" style="color:rgb(247, 140, 108)">443</span><span class="token plain">/tcp   radgrad-docker_nginx_1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">7bb923963c49        radgrad/radgrad:2.0.0   </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;docker-entrypoint.sâ€¦&quot;</span><span class="token plain">   </span><span class="token number" style="color:rgb(247, 140, 108)">29</span><span class="token plain"> seconds ago      Up </span><span class="token number" style="color:rgb(247, 140, 108)">27</span><span class="token plain"> seconds       </span><span class="token number" style="color:rgb(247, 140, 108)">80</span><span class="token plain">/tcp, </span><span class="token number" style="color:rgb(247, 140, 108)">0.0</span><span class="token plain">.0.0:8888-</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token number" style="color:rgb(247, 140, 108)">8888</span><span class="token plain">/tcp             radgrad-docker_radgrad_1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">1ffaad0fa3b5        mongo:4.0.5             </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;docker-entrypoint.sâ€¦&quot;</span><span class="token plain">   </span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token plain"> seconds ago      Up </span><span class="token number" style="color:rgb(247, 140, 108)">28</span><span class="token plain"> seconds       </span><span class="token number" style="color:rgb(247, 140, 108)">127.0</span><span class="token plain">.0.1:27017-</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token number" style="color:rgb(247, 140, 108)">27017</span><span class="token plain">/tcp                 radgrad-mongo</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">radgrad@radgrad2:~/radgrad-docker$</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="debugging-check-docker-logs"></a>Debugging: Check Docker logs<a aria-hidden="true" tabindex="-1" class="hash-link" href="#debugging-check-docker-logs" title="Direct link to heading">#</a></h3><p>Sometimes they reveal problems. For example:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-shell codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">radgrad-docker$ docker logs radgrad-docker_nginx_1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token number" style="color:rgb(247, 140, 108)">2020</span><span class="token plain">/09/28 </span><span class="token number" style="color:rgb(247, 140, 108)">20</span><span class="token plain">:39:16 </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">emerg</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#1: host not found in upstream &quot;boxupdateserver:8151&quot; in /etc/nginx/conf.d/app.conf:6</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">radgrad@radgrad2:~/radgrad-docker$</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="setup-oplog-tailing"></a>Setup oplog tailing<a aria-hidden="true" tabindex="-1" class="hash-link" href="#setup-oplog-tailing" title="Direct link to heading">#</a></h2><p>TBA</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="setup-db-indexes"></a>Setup DB indexes<a aria-hidden="true" tabindex="-1" class="hash-link" href="#setup-db-indexes" title="Direct link to heading">#</a></h2><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</h5></div><div class="admonition-content"><p>ensure-indexes.js is not yet ready for use with RadGrad.</p></div></div><p>When you create a new RadGrad database, it&#x27;s best to ensure that the indexes are created before any data is accepted.</p><p>Change directories into the radgrad-docker/scripts/mongodb directory.</p><p>Next, ensure that the MongoDB docker container is running.</p><p>Finally, invoke the ensure-indexes.sh script:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-shell codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">radgrad-docker/scripts/mongodb $ ./ensure-indexes.sh</span></div></div></div></div></div></div></article><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/about/opportunities"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Opportunities</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/archive/docker/build-a-release"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Build and publish a new release of RadGrad Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3SO_"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#setup-location" class="table-of-contents__link">Setup location</a></li><li><a href="#open-ports" class="table-of-contents__link">Open ports</a></li><li><a href="#install-docker" class="table-of-contents__link">Install Docker</a></li><li><a href="#clone-radgrad-docker" class="table-of-contents__link">Clone radgrad-docker</a></li><li><a href="#setup-config" class="table-of-contents__link">Setup config/</a></li><li><a href="#setup-settings" class="table-of-contents__link">Setup settings</a></li><li><a href="#setup-https" class="table-of-contents__link">Setup https</a><ul><li><a href="#modify-nginxenv" class="table-of-contents__link">Modify nginx.env</a></li><li><a href="#perform-a-test-run" class="table-of-contents__link">Perform a test run</a></li><li><a href="#request-real-ssl-certificate" class="table-of-contents__link">Request real SSL certificate</a></li><li><a href="#debugging--check-service-status" class="table-of-contents__link">Debugging:  Check service status</a></li><li><a href="#debugging-check-docker-logs" class="table-of-contents__link">Debugging: Check Docker logs</a></li></ul></li><li><a href="#setup-oplog-tailing" class="table-of-contents__link">Setup oplog tailing</a></li><li><a href="#setup-db-indexes" class="table-of-contents__link">Setup DB indexes</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="text--center"><div>RadGrad is sponsored by:<br>
                  <a href="http://csdl.ics.hawaii.edu">Collaborative Software Development Laboratory</a><br>
                  <a href="http://www.ics.hawaii.edu">Department of Information and Computer Sciences</a><br>
                  <a href="http://www.hawaii.edu">University of Hawaii</a><br>
                  with funding from the National Science Foundation (Awards 1829542, 2025112)</div></div></div></footer></div>
<script src="/styles.da1d4261.js"></script>
<script src="/runtime~main.e66a390a.js"></script>
<script src="/main.fbf409a7.js"></script>
<script src="/2.2b91e6c9.js"></script>
<script src="/3.39e53254.js"></script>
<script src="/175.4b48d1fb.js"></script>
<script src="/178.722368df.js"></script>
<script src="/935f2afb.8657171f.js"></script>
<script src="/17896441.ed501a95.js"></script>
<script src="/4050a050.bfc8e83e.js"></script>
</body>
</html>