(window.webpackJsonp=window.webpackJsonp||[]).push([[204],{263:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return o})),a.d(t,"metadata",(function(){return s})),a.d(t,"rightToc",(function(){return l})),a.d(t,"default",(function(){return c}));var n=a(2),r=a(6),i=(a(0),a(320)),o={title:"How to manage users",sidebar_label:"Manage users"},s={unversionedId:"developers/design/app/imports/api/manage-users",id:"developers/design/app/imports/api/manage-users",isDocsHomePage:!1,title:"How to manage users",description:'RadGrad implements a user management scheme that combines two constructs: the Meteor User collection as well as a set of "Profile" collections that provide the specific information required for the role associated with a user. See the Users and Profiles section for more information on the representation of users and profiles.',source:"@site/docs/developers/design/app/imports/api/manage-users.md",slug:"/developers/design/app/imports/api/manage-users",permalink:"/docs/developers/design/app/imports/api/manage-users",version:"current",lastUpdatedBy:"Philip Johnson",lastUpdatedAt:1621440822,sidebar_label:"Manage users",sidebar:"mainSidebar",previous:{title:"Backups using dump-restore",permalink:"/docs/developers/design/app/imports/api/dump-restore"},next:{title:"User Interactions",permalink:"/docs/developers/design/app/imports/api/user-interactions"}},l=[{value:"Usernames",id:"usernames",children:[]},{value:"Authentication",id:"authentication",children:[]},{value:"Passwords",id:"passwords",children:[]},{value:"Role Migration",id:"role-migration",children:[]},{value:"Email reassignment",id:"email-reassignment",children:[]},{value:"Referencing user and profile IDs in the code",id:"referencing-user-and-profile-ids-in-the-code",children:[]}],d={rightToc:l};function c(e){var t=e.components,a=Object(r.a)(e,["components"]);return Object(i.b)("wrapper",Object(n.a)({},d,a,{components:t,mdxType:"MDXLayout"}),Object(i.b)("p",null,'RadGrad implements a user management scheme that combines two constructs: the Meteor User collection as well as a set of "Profile" collections that provide the specific information required for the role associated with a user. See the Users and Profiles section for more information on the representation of users and profiles.'),Object(i.b)("h2",{id:"usernames"},"Usernames"),Object(i.b)("p",null,'In RadGrad, Meteor usernames are email addresses, such as "',Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"mailto:radgrad@hawaii.edu"}),"radgrad@hawaii.edu"),'". This avoids situations such as creating a username like "foo" for a mentor and later finding that we need to support a student with email address ',Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"mailto:foo@hawaii.edu."}),"foo@hawaii.edu.")," "),Object(i.b)("p",null,'Slugs are created for each username (email address).  This is the way we guarantee that usernames are unique. Use of email addresses for users prevents certain types of collisions. For example, creating an opportunity named "java" and then later needing to define a student whose UH account is "java". '),Object(i.b)("p",null,"The username is embedded in URLs, for example: ",Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"http://radgrad.ics.hawaii.edu/admin/radgrad@hawaii.edu/home"}),"http://radgrad.ics.hawaii.edu/admin/radgrad@hawaii.edu/home"),".   "),Object(i.b)("h2",{id:"authentication"},"Authentication"),Object(i.b)("p",null,"In the current instance of RadGrad (",Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"http://radgrad.ics.hawaii.edu"}),"http://radgrad.ics.hawaii.edu"),"), Students, Faculty, and Advisors must login through UH CAS with their @hawaii.edu account."),Object(i.b)("p",null,"The single admin account logs in through Meteor Accounts, and the username and email associated with it are provided in the settings.json file.  "),Object(i.b)("p",null,"As noted above, the set of usernames must be globally unique. You can't have a student whose username is \"",Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"mailto:joe@hawaii.edu"}),"joe@hawaii.edu"),'" who authenticates via CAS and a mentor whose username is also "',Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"mailto:joe@hawaii.edu"}),"joe@hawaii.edu"),'" who authenticates via Meteor accounts. The SlugCollection will fail when trying to define the profile for the second ',Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"mailto:joe@hawaii.edu"}),"joe@hawaii.edu"),"."),Object(i.b)("h2",{id:"passwords"},"Passwords"),Object(i.b)("p",null,"No plain-text passwords are stored in JSON data or in ProfileCollections.   "),Object(i.b)("p",null,"Students, Faculty, and Advisors use CAS to login, so lack of password field is no problem."),Object(i.b)("p",null,"In the settings file, we provide a flag which sets the password to something simple for development purposes only."),Object(i.b)("h2",{id:"role-migration"},"Role Migration"),Object(i.b)("p",null,"There are two common forms of role migration:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"Student to Alumni.  The student profile collection will have an optional field called isAlumni. If present and truthy, then this student is an alumni and their role will be set to ROLE.ALUMNI.  For now, that means: (a) the user cannot login to RadGrad, and (b) that user will not appear in listings of students.  This just gives us a way to preserve their data while not cluttering up the social network with departed students.")),Object(i.b)("h2",{id:"email-reassignment"},"Email reassignment"),Object(i.b)("p",null,"The approach documented in this page does not currently address email reassignment. If ITS reuses an email address owned by a prior UH student to a new student, then that person can see the old person's profile. Unless they have been made an alumni, and then they can't login.  This is hopefully rare enough that we can deal with it on a case-by-case basis."),Object(i.b)("h2",{id:"referencing-user-and-profile-ids-in-the-code"},"Referencing user and profile IDs in the code"),Object(i.b)("p",null,"In the data model as a whole, references within collection documents to users always refer to docIDs within the Meteor.users collection.  Note that the user's email address is defined as both the account name and the email in the Meteor.users collection."),Object(i.b)("p",null,'Profile docIDs are never stored as "foreign keys" in other collections.  '),Object(i.b)("p",null,"As a result, you might see fields or variables named userID, studentID, adminID, sponsorID, facultyID, etc.  None of these refer to the profile.  They always refer to either the Meteor.users docID or to the user's account name (a.k.a. email address)."))}c.isMDXComponent=!0},320:function(e,t,a){"use strict";a.d(t,"a",(function(){return u})),a.d(t,"b",(function(){return m}));var n=a(0),r=a.n(n);function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var d=r.a.createContext({}),c=function(e){var t=r.a.useContext(d),a=t;return e&&(a="function"==typeof e?e(t):s(s({},t),e)),a},u=function(e){var t=c(e.components);return r.a.createElement(d.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},h=r.a.forwardRef((function(e,t){var a=e.components,n=e.mdxType,i=e.originalType,o=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),u=c(a),h=n,m=u["".concat(o,".").concat(h)]||u[h]||p[h]||i;return a?r.a.createElement(m,s(s({ref:t},d),{},{components:a})):r.a.createElement(m,s({ref:t},d))}));function m(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var i=a.length,o=new Array(i);o[0]=h;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:n,o[1]=s;for(var d=2;d<i;d++)o[d]=a[d];return r.a.createElement.apply(null,o)}return r.a.createElement.apply(null,a)}h.displayName="MDXCreateElement"}}]);