(window.webpackJsonp=window.webpackJsonp||[]).push([[171],{226:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return i})),n.d(t,"metadata",(function(){return s})),n.d(t,"rightToc",(function(){return c})),n.d(t,"default",(function(){return p}));var a=n(2),o=n(6),r=(n(0),n(345)),i={title:"RadGrad2 Data Model",sidebar_label:"Data Model"},s={unversionedId:"developers/design/app/imports/api/data-model",id:"developers/design/app/imports/api/data-model",isDocsHomePage:!1,title:"RadGrad2 Data Model",description:'In RadGrad, we refer to the set of Typescript classes, each of which encapsulates a single MongoDB collection, as the "data model".',source:"@site/docs/developers/design/app/imports/api/data-model.md",slug:"/developers/design/app/imports/api/data-model",permalink:"/docs/developers/design/app/imports/api/data-model",version:"current",lastUpdatedBy:"Philip Johnson",lastUpdatedAt:1608326513,sidebar_label:"Data Model",sidebar:"mainSidebar",previous:{title:"Overview of api/",permalink:"/docs/developers/design/app/imports/api/overview"},next:{title:"Class Hierarchy",permalink:"/docs/developers/design/app/imports/api/class-hierarchy"}},c=[],l={rightToc:c};function p(e){var t=e.components,n=Object(o.a)(e,["components"]);return Object(r.b)("wrapper",Object(a.a)({},l,n,{components:t,mdxType:"MDXLayout"}),Object(r.b)("p",null,'In RadGrad, we refer to the set of Typescript classes, each of which encapsulates a single MongoDB collection, as the "data model". '),Object(r.b)("p",null,"For example, RadGrad provides a class called ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/radgrad/radgrad2/blob/master/app/imports/api/career/CareerGoalCollection.ts"}),"CareerGoalCollection"),', which manages access to a MongoDB collection also called "CareerGoalCollection".  Upon startup, a singleton instance of the CareerGoalCollection class is instantiated and assigned to a variable called "CareerGoals". This variable is available for import into any files that need to access data from the MongoDB CareerGoalCollection collection.'),Object(r.b)("p",null,'We follow this design pattern for all the elements of the RadGrad data model: there is a Typescript class with the same name as the MongoDB collection, and we create a singleton instance of the class which is used by any clients who need to interact with that data. So, for example, the "Courses" variable is the singleton instance of the CourseCollection Typescript class which manages access to the CourseCollection MongoDB collection, the "Interests" variable is the singleton instance of the InterestCollection Typescript class which manages access to the InterestCollection MongoDB collection, and so on.'),Object(r.b)("p",null,"This may sound confusing, but it's quite straightforward in practice. Here's a sample line of code to illustrate:"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{}),"const interestType = InterestTypes.findSlugByID(doc.interestTypeID);\n")),Object(r.b)("p",null,"The variable ",Object(r.b)("inlineCode",{parentName:"p"},"InterestTypes")," is imported into this client module, and it refers to the singleton instance of the InterestTypeCollection class. (Because these singleton instances have no mutable state, there are no concurrency issues associated with them.) The method ",Object(r.b)("inlineCode",{parentName:"p"},"findSlugByID")," from this class is called with a string that (hopefully) holds the value of a document ID in the InterestTypeCollection."),Object(r.b)("p",null,"This method ends up accessing both the MongoDB InterestTypeCollection and SlugCollection collections in order to return the slug string associated with this InterestType. The point is that client code does not manipulate MongoDB collections directly; instead, they always invoke a method bound to the singleton instance of the corresponding Typescript class."),Object(r.b)("p",null,'The implementation of the data model is contained in the imports/api directory.  In some ways, it would have been more descriptive to name this directory "datamodel" rather than "api". We named it "api" in order to conform to ',Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://guide.meteor.com/structure.html#example-app-structure"}),"Meteor best practices for application structure"),"."),Object(r.b)("p",null,"Because every MongoDB collection is encapsulated by a Typescript class, there are two orthogonal ways to describe the structure of the data model. The Class Hierarchy structure describes the structure in terms of inheritance relationships between the Typescript classes.  The Entity-Relationship structure describes the data dependencies between the individual documents contained in MongoDB collections. The following sections in this chapter document both of these views of the data model structure."))}p.isMDXComponent=!0},345:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return m}));var a=n(0),o=n.n(a);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=o.a.createContext({}),p=function(e){var t=o.a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},d=function(e){var t=p(e.components);return o.a.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return o.a.createElement(o.a.Fragment,{},t)}},h=o.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,i=e.parentName,l=c(e,["components","mdxType","originalType","parentName"]),d=p(n),h=a,m=d["".concat(i,".").concat(h)]||d[h]||u[h]||r;return n?o.a.createElement(m,s(s({ref:t},l),{},{components:n})):o.a.createElement(m,s({ref:t},l))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,i=new Array(r);i[0]=h;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:a,i[1]=s;for(var l=2;l<r;l++)i[l]=n[l];return o.a.createElement.apply(null,i)}return o.a.createElement.apply(null,n)}h.displayName="MDXCreateElement"}}]);