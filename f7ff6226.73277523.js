(window.webpackJsonp=window.webpackJsonp||[]).push([[275],{333:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return r})),a.d(t,"metadata",(function(){return s})),a.d(t,"rightToc",(function(){return c})),a.d(t,"default",(function(){return d}));var n=a(2),i=a(6),o=(a(0),a(345)),r={title:"UI Visual Theme"},s={unversionedId:"developers/patterns/ui-theme",id:"developers/patterns/ui-theme",isDocsHomePage:!1,title:"UI Visual Theme",description:"Problem",source:"@site/docs/developers/patterns/ui-theme.md",slug:"/developers/patterns/ui-theme",permalink:"/docs/developers/patterns/ui-theme",version:"current",lastUpdatedBy:"Philip Johnson",lastUpdatedAt:1616615580,sidebar:"mainSidebar",previous:{title:"Spike solutions and refactoring",permalink:"/docs/developers/patterns/refactoring"},next:{title:"Meteor Methods Best Practices",permalink:"/docs/developers/patterns/methods"}},c=[{value:"Problem",id:"problem",children:[]},{value:"Tentative steps toward a solution",id:"tentative-steps-toward-a-solution",children:[{value:"Background and rational",id:"background-and-rational",children:[]},{value:"Overview of the theme implementation",id:"overview-of-the-theme-implementation",children:[]},{value:"Issues with our current theme implementation",id:"issues-with-our-current-theme-implementation",children:[]}]}],l={rightToc:c};function d(e){var t=e.components,a=Object(i.a)(e,["components"]);return Object(o.b)("wrapper",Object(n.a)({},l,a,{components:t,mdxType:"MDXLayout"}),Object(o.b)("h2",{id:"problem"},"Problem"),Object(o.b)("p",null,'We want to provide a consistent visual look and feel (i.e. a "theme") in the RadGrad user interface, and be able to evolve that theme over time with a minimum amount of effort.'),Object(o.b)("p",null,"By visual look and feel, we mean colors, padding, margins, typography, buttons, links, and so forth."),Object(o.b)("p",null,"To accomplish this, we need to centralize the definition of the RadGrad visual theme as much as possible, and ensure that all UI components refer to these centralized definitions when possible."),Object(o.b)("p",null,"Currently, many UI components provide ad-hoc, one-off implementations of thematic elements. This makes it hard to achieve a consistent look and feel, and also makes it hard to evolve the UI theme over time."),Object(o.b)("h2",{id:"tentative-steps-toward-a-solution"},"Tentative steps toward a solution"),Object(o.b)("p",null,"We have not figured out a definitive set of design patterns and/or best practices to solve this problem. This page documents our progress so far."),Object(o.b)("h3",{id:"background-and-rational"},"Background and rational"),Object(o.b)("p",null,"RadGrad's UI is implemented using ",Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"https://react.semantic-ui.com/"}),"Semantic UI React"),", along with a custom CSS theme based on a fork of  Semantic UI called ",Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"https://fomantic-ui.com/"}),"Fomantic UI"),"."),Object(o.b)("p",null,"The rationale for this rather convoluted choice is that when RadGrad development first started, we evaluated Bootstrap, Semantic UI, Material, and other CSS frameworks and found that Semantic UI appeared to offer the best set of features for RadGrad."),Object(o.b)("p",null,'When we switched to React for RadGrad 2, we then switched to the React integration of Semantic UI (Semantic UI/React).  However, around that time, the developer of Semantic UI stopped working on the system.  Eventually, a community effort was started to maintain Semantic UI until such time that the original developer could resume efforts.  This community fork is called Fomantic UI (I guess because it\'s a "faux" version of Semantic UI).  A principle design goal of Fomantic UI is backwards compatibility with Semantic UI.'),Object(o.b)("p",null,"Semantic UI provides the ability to develop custom themes that can override the default fonts, colors, sizes, and so forth. One impact of the lack of maintenance of Semantic UI is that the tool pipeline for building a custom theme has become out of date and difficult to run with modern releases of Node and NPM."),Object(o.b)("p",null,"To enable us to easily continue development of a custom theme for RadGrad2, we have now switched to Fomantic UI. Our comfort with this decision is aided by the fact that the number of weekly NPM downloads of Fomantic UI is now greater than the number of weekly downloads of Semantic UI."),Object(o.b)("p",null,"Our custom theme is maintained in the ",Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"https://github.com/radgrad/fomantic-ui"}),"RadGrad Fomantic UI GitHub Repo"),'.  For the most part, using Fomantic UI results in a file called semantic-ui.min.css which is a "drop in" replacement for the CSS file built by the original Semantic UI system.'),Object(o.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(o.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-heading"}),Object(o.b)("h5",{parentName:"div"},Object(o.b)("span",Object(n.a)({parentName:"h5"},{className:"admonition-icon"}),Object(o.b)("svg",Object(n.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(o.b)("path",Object(n.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"})))),'"For the most part" means "Not in all cases".')),Object(o.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-content"}),Object(o.b)("p",{parentName:"div"},"So far, we have discovered that Fomantic UI provides an up-to-date release of ",Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"https://fontawesome.com/"}),"Font Awesome")," icons, which is obviously a good thing.  But that means that there are small differences between the valid icon names listed in the ",Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"https://semantic-ui.com/elements/icon.html"}),"Semantic UI Icon Documentation")," and those in the ",Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"https://fomantic-ui.com/elements/icon.html"}),"Fomantic UI Icon Documentation"),". So, when it comes to icon names, you should refer to the Fomantic UI documentation."),Object(o.b)("p",{parentName:"div"},'On the other hand, our use of Semantic UI/React means that "extended" features of Fomantic UI (such as ',Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"https://fomantic-ui.com/modules/slider.html"}),"Slider")," are not available to us, since Semantic UI/React only supports the original version of Semantic UI. This means that you can't simply refer to the Fomantic UI documentation in all cases and assume a feature is available."),Object(o.b)("p",{parentName:"div"},'There may be other "gotchas" that arise in future, which we will try to document in this chapter.'))),Object(o.b)("h3",{id:"overview-of-the-theme-implementation"},"Overview of the theme implementation"),Object(o.b)("p",null,"As noted above, we maintain a portion our custom theme in our fomantic-ui repo.  Documention on how to install and build a custom theme, and then install it into RadGrad are provided in its ",Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"https://github.com/radgrad/fomantic-ui/blob/main/README.md"}),"README.md")," file. In general, this involves:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Overridding various typography, color, and other CSS definitions for individual components."),Object(o.b)("li",{parentName:"ul"},"Running a script to generate a semantic-ui.css.min file."),Object(o.b)("li",{parentName:"ul"},"Copying this file and other icon files into the RadGrad application directory tree.")),Object(o.b)("p",null,"In addition to defining colors and fonts, this repo currently defines many CSS selectors. See their definitions at:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(n.a)({parentName:"li"},{href:"https://github.com/radgrad/fomantic-ui/blob/main/semantic/src/site/globals/site.overrides"}),"fomantic-ui/semantic/src/site/globals/site.overrides"))),Object(o.b)("p",null,"The story does not stop there, however.  In addition to the custom Semantic/Fomantic theme, we also alter the CSS in several other places:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"https://github.com/radgrad/radgrad2/blob/master/app/client/style.css"}),"app/client/style.css"),'. This is the standard location for a CSS style file that is loaded by Meteor when the client starts up and provides additional "global" CSS definitions.')),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"https://github.com/radgrad/radgrad2/blob/master/app/imports/startup/client/startup.tsx"}),"app/imports/startup/client/startup.tsx"),". This file contains a one liner to add a class to the body element in order to establish a custom background color for all pages. This is a special purpose hack needed to modify the body element in Meteor, and shouldn't be required for any other theme implementation."))),Object(o.b)("p",null,'In addition to these two places which provide "global" thematic definitions, we define and load CSS in several additional ways in order to provide more local customization.'),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"Files like ",Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"https://github.com/radgrad/radgrad2/blob/master/app/imports/ui/pages/student/style.css"}),"ui/pages/student/style.css")," provide CSS customizations for a single page or pages. In this case, ",Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"https://github.com/radgrad/radgrad2/blob/master/app/imports/ui/pages/student/StudentHomePage.tsx"}),"ui/pages/student/StudentHomePage.tsx"),".")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"Files like ",Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"https://github.com/radgrad/radgrad2/blob/master/app/imports/ui/components/landing/utilities/landing-styles.ts"}),"ui/components/landing/utilities/landing-styles.ts"),' also provide CSS customizations, but using a Javascript object where the keys correspond to the CSS selectors and the values are an object with CSS properties and values in React format (i.e. "backgroundColor" rather than "background-color").  An example of how this representation for CSS is injected into components is in ',Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"https://github.com/radgrad/radgrad2/blob/master/app/imports/ui/components/landing/LandingSection9.tsx"}),"ui/components/landing/LandingSection9.tsx"),".")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"File like ",Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"https://github.com/radgrad/radgrad2/blob/master/app/imports/ui/components/student/StudentPageMenu.tsx"}),"ui/components/student/StudentPageMenu.tsx")," illustrate a third way, which just uses the style parameter available in most Semantic UI/React components to provide CSS customizations."))),Object(o.b)("h3",{id:"issues-with-our-current-theme-implementation"},"Issues with our current theme implementation"),Object(o.b)("p",null,"As shown above, we have five approaches to CSS theme implementation (not including the startup hack for background color):"),Object(o.b)("h4",{id:"1-global-semantic-uimincss-file"},"1. Global semantic-ui.min.css file"),Object(o.b)("p",null,"The benefit of this approach is that these CSS class definitions can refer to variables. So, we don't have to hard-code colors, fonts, in these CSS class definitions. If we want to change a color, we can change it in the single place where it is declared as a variable, and then all of its occurrences in CSS class definitions will be updated automatically."),Object(o.b)("p",null,"The cost of this approach is that implementing a change requires us to rebuild the theme in its repo and install it into Meteor."),Object(o.b)("h4",{id:"2-global-meteor-stylecss-file"},"2. Global Meteor style.css file"),Object(o.b)("p",null,"The benefit of this approach is ease of modification. To make a change, we just edit the file and re-run the system."),Object(o.b)("p",null,"The cost is that we have to hard-code colors, sizes, etc. which might introduce inconsistencies."),Object(o.b)("h4",{id:"3-local-stylecss-file"},"3. Local style.css file"),Object(o.b)("p",null,'The benefit of this approach is modularity and encapsulation.  The location of the file in the directory hierarchy implicitly defines its "scope".  The definitions are available only if imported by a component, injected by textual reference to CSS class.'),Object(o.b)("p",null,"The cost of this approach is the possibility of introducing local theme changes that are incompatible with the rest of the system."),Object(o.b)("h4",{id:"4-local-stylejs-file"},"4. Local style.js file"),Object(o.b)("p",null,"The benefit of this approach is also modularity and encapsulation, as well as a more Javascript-y manner of use."),Object(o.b)("p",null,'The cost is inconsistency with the "local style.css" approach.'),Object(o.b)("h4",{id:"5-local-inline-css"},"5. Local inline CSS"),Object(o.b)("p",null,'The benefit of this approach is even further modularity and encapsulation, plus conciseness for making "very small changes". Creating an additional style.css file might be overkill if all you want is a little padding.'),Object(o.b)("p",null,"The cost is, again, the potential for inconsistency and excessive use."))}d.isMDXComponent=!0},345:function(e,t,a){"use strict";a.d(t,"a",(function(){return p})),a.d(t,"b",(function(){return u}));var n=a(0),i=a.n(n);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function c(e,t){if(null==e)return{};var a,n,i=function(e,t){if(null==e)return{};var a,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}var l=i.a.createContext({}),d=function(e){var t=i.a.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):s(s({},t),e)),a},p=function(e){var t=d(e.components);return i.a.createElement(l.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return i.a.createElement(i.a.Fragment,{},t)}},h=i.a.forwardRef((function(e,t){var a=e.components,n=e.mdxType,o=e.originalType,r=e.parentName,l=c(e,["components","mdxType","originalType","parentName"]),p=d(a),h=n,u=p["".concat(r,".").concat(h)]||p[h]||m[h]||o;return a?i.a.createElement(u,s(s({ref:t},l),{},{components:a})):i.a.createElement(u,s({ref:t},l))}));function u(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var o=a.length,r=new Array(o);r[0]=h;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:n,r[1]=s;for(var l=2;l<o;l++)r[l]=a[l];return i.a.createElement.apply(null,r)}return i.a.createElement.apply(null,a)}h.displayName="MDXCreateElement"}}]);